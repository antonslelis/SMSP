var timepicker={defaults:{interval:15,defaultHour:null,defaultMinute:null,start:0,end:24},options:null,time:{hour:null,minute:null},active:!1,source:null,load:function(e){var t=this;this.options=e,t.each(function(e){null!=t.option("defaultHour")&&(e.value=t.pad(t.option("defaultHour")),t.time.hour=t.option("defaultHour"),null!=t.option("defaultMinute")?(e.value+=":"+t.pad(t.option("defaultMinute")),t.time.minute=t.option("defaultMinute")):(e.value+=":00",t.time.minute=0)),e.onclick=function(){t.source=this,1!=t.active&&t.showHour(this,1,t.option("start"),t.option("end"),function(e,i){t.time.hour=i,t.source.value=t.time.hour+":00",t.showMinute(e,t.option("interval"),60,t.time.hour,function(e){t.time.minute=e,t.source.value=t.time.hour+":"+t.time.minute})})}})},option:function(e){return null===this.options?this.defaults[e]:void 0===this.options[e]?this.defaults[e]:this.options[e]},each:function(e){for(var t=document.querySelectorAll('[data-toggle="timepicker"]'),i=0;i<t.length;i++)e(t[i])},make:function(e){return this.active=!0,div=document.createElement("div"),ul=document.createElement("ul"),ul.setAttribute("data-value","null"),div.setAttribute("class","timepicker"),div.setAttribute("data-name",e.getAttribute("name")),div.appendChild(ul),e.parentNode.insertBefore(div,e.nextSibling),document.addEventListener("mouseup",this.onClickEvent),document.addEventListener("keydown",this.onKeyEvents),ul},remove:function(){document.removeEventListener("mouseup",this.onClickEvent),document.removeEventListener("keydown",this.onKeyEvents),timepicker=document.querySelector(".timepicker"),timepicker.parentNode.removeChild(timepicker),this.active=!1},clear:function(e){all=e.querySelectorAll("li");for(var t=0;t<all.length;t++)all[t].parentNode.removeChild(all[t])},showHour:function(e,t,i,l,o){var n=null;ul=this.make(e);for(var u=i;l>u;u+=t)li=document.createElement("li"),li.setAttribute("href","#"),li.setAttribute("data-value",this.pad(u)),li.appendChild(document.createTextNode(this.pad(u)+":00")),ul.appendChild(li),null==n&&(n=li.clientHeight),li.onmouseover=function(){all=document.querySelectorAll("div.timepicker ul li");for(var e=0;e<all.length;e++)all[e].classList.remove("hover");this.classList.add("hover")},li.onmouseout=function(){this.classList.remove("hover")},li.onclick=function(){o(ul,this.getAttribute("data-value"))};null==this.time.hour?ul.scrollTop=n*this.option("default"):ul.scrollTop=this.time.hour*n},showMinute:function(e,t,i,l,o){self=this,this.clear(e);for(var n=0;i>n;n+=t)li=document.createElement("li"),li.setAttribute("href","#"),li.setAttribute("data-value",this.pad(n)),li.appendChild(document.createTextNode(l+":"+this.pad(n))),ul.appendChild(li),li.onmouseover=function(){all=document.querySelectorAll("div.timepicker ul li");for(var e=0;e<all.length;e++)all[e].classList.remove("hover");this.classList.add("hover")},li.onmouseout=function(){this.classList.remove("hover")},li.onclick=function(){o(this.getAttribute("data-value")),self.remove()}},pad:function(e){for(var t=String(e);t.length<2;)t="0"+t;return t},onClickEvent:function(){void 0===event.target.attributes["data-value"]&&timepicker.remove()},onKeyEvents:function(){switch(event.keyCode){case 27:timepicker.remove();break;case 40:if(item=document.querySelector("div.timepicker ul li.hover"),list=document.querySelectorAll("div.timepicker ul li"),index=Array.prototype.indexOf.call(list,item),-1==index){list[0].classList.add("hover");break}index<list.length-1&&(item.classList.remove("hover"),list[index+1].classList.add("hover"));break;case 38:item=document.querySelector("div.timepicker ul li.hover"),list=document.querySelectorAll("div.timepicker ul li"),index=Array.prototype.indexOf.call(list,item),index>0&&(item.classList.remove("hover"),list[index-1].classList.add("hover"));break;case 13:item=document.querySelector("div.timepicker ul li.hover"),item.click()}}};